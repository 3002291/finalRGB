<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.douzone.comet.service.eh.ehsevr.dao.Ehsevr00900_DAO">

	<select id="selectList" parameterType="hashmap" resultType="com.douzone.comet.service.eh.ehsevr.models.Ehsevr00900">
		SELECT	COMPANY_CD,
				PLANT_CD,
				EQP_CD,
				EQP_NM,
				ARTTK_CD,
				ARTTK_NM,
				FACI_CD,
				FACI_DC,
				SQ_NO,
				RMK_DC,
				INSERT_ID,
				INSERT_IP,
				INSERT_MCADDR_NM,
				INSERT_DTS,
				UPDATE_ID,
				UPDATE_IP,
				UPDATE_MCADDR_NM,
				UPDATE_DTS
		FROM @{dzparam_dbname}EH_ARTTKFG_MST
		WHERE COMPANY_CD = #{P_COMPANY_CD}
		<if test='P_PLANT_CD != null and !"".equals(P_PLANT_CD)'>
			AND PLANT_CD = #{P_PLANT_CD}
		</if>
		<if test='P_KEYWORD != null and P_KEYWORD != ""'>
		AND (  UPPER(FACI_CD) 	LIKE '%'||#{P_KEYWORD}||'%' 
			OR UPPER(FACI_DC) 	LIKE '%'||#{P_KEYWORD}||'%'
			)
		</if>		
		 ORDER BY	COMPANY_CD, PLANT_CD, EQP_CD, ARTTK_CD, FACI_CD
	</select>


	<insert id="insertEhsevr00900">		
		INSERT INTO @{dzparam_dbname}EH_ARTTKFG_MST (
				COMPANY_CD,
				PLANT_CD,
				EQP_CD,
				EQP_NM,
				ARTTK_CD,
				ARTTK_NM,
				FACI_CD,
				FACI_DC,
				SQ_NO,
				RMK_DC,
				INSERT_ID,
				INSERT_IP,
				INSERT_MCADDR_NM,
				INSERT_DTS,
				UPDATE_ID,
				UPDATE_IP,
				UPDATE_MCADDR_NM,
				UPDATE_DTS
		) VALUES (
				#{company_cd},
				#{plant_cd},
				#{eqp_cd},
				#{eqp_nm},
				#{arttk_cd},
				#{arttk_nm},
				#{faci_cd},
				#{faci_dc},
				#{sq_no},
				#{rmk_dc},
				#{insert_id},
				#{insert_ip},
				#{insert_mcaddr_nm},
				SYSDATE,
				#{update_id},
				#{update_ip},
				#{update_mcaddr_nm},
				SYSDATE		
		)		
	</insert>

	<update id="updateEhsevr00900">		
		UPDATE	@{dzparam_dbname}EH_ARTTKFG_MST
		SET		
				EQP_CD		= #{eqp_cd},
				EQP_NM		= #{eqp_nm},
				ARTTK_NM 	= #{arttk_nm},
				FACI_DC		= #{faci_dc},
				SQ_NO		= #{sq_no},
				RMK_DC		= #{rmk_dc},
				UPDATE_ID	= #{update_id},
				UPDATE_IP	= #{update_ip},
				UPDATE_MCADDR_NM = #{update_mcaddr_nm},
				UPDATE_DTS	= SYSDATE
		WHERE	COMPANY_CD = #{company_cd}
		AND		PLANT_CD	= #{plant_cd} -- 공장코드
		AND		ARTTK_CD	= #{arttk_cd} -- 폭기조코드
		AND		FACI_CD		= #{faci_cd} -- 시설코드
	</update>
				
	<delete id="deleteEhsevr00900">
		DELETE
		FROM	@{dzparam_dbname}EH_ARTTKFG_MST
		WHERE	COMPANY_CD = #{company_cd}
		AND		PLANT_CD	= #{plant_cd} -- 공장코드
		AND		ARTTK_CD	= #{arttk_cd} -- 폭기조코드
		AND		FACI_CD		= #{faci_cd} -- 시설코드
	</delete>

</mapper>